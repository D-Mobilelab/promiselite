!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PromiseLite=n()}}(function(){return function n(e,r,t){function o(f,u){if(!r[f]){if(!e[f]){var c="function"==typeof require&&require;if(!u&&c)return c(f,!0);if(i)return i(f,!0);var l=new Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l}var s=r[f]={exports:{}};e[f][0].call(s.exports,function(n){var r=e[f][1][n];return o(r?r:n)},s,s.exports,n,e,r,t)}return r[f].exports}for(var i="function"==typeof require&&require,f=0;f<t.length;f++)o(t[f]);return o}({1:[function(n,e,r){var t={0:"pending",1:"fulfilled",2:"rejected"},o=function(n){return n},i=function(n,e){if("undefined"!=typeof n&&"function"!=typeof n)throw"PromiseLite :: executor must be a function, got "+typeof n;var r,f,u=this,c=0,l=e||[],s=function(){return r},a=function(){return f};this.isPending=function(){return 0===c},this.isFulfilled=function(){return 1===c},this.isRejected=function(){return 2===c},this.isSettled=function(){return 1===c||2===c},this.getStatus=function(){return t[c]};var d=function(){console.log("next",l);var n=l.slice(1,l.length);return l.shift(),console.log("deferred",l),n},h=function(n,e){var r=d();return new i(function(t,i){try{t(n(s()))}catch(f){if(console.log("error during fulfill",f,r),e==o&&0==r.length)throw console.log("here",e,r),f;console.log("handling",e,r),i(e(f))}},r)},g=function(n){var e=d();return new i(function(r,t){try{if(console.log("ciaone",n,e),n==o&&0==e.length)throw a();t(n(a()))}catch(i){if(console.log("error during reject",i,e),0==e.length)throw console.log("no more"),i;console.log("passing",i,e),t(o(i))}},e)};this.resolve=function(n){if(u.isSettled())return u;if(c=1,r=n,l.length>0){var e=l[0];return e.onSuccess===e.onError&&(e.onError=o),console.log("immediatelyFulfill",e),h(e.onSuccess,e.onError)}},this.reject=function(n){if(u.isRejected())return u;if(c=2,f=n,l.length>0){var e=l[0];return console.log("immediatelyReject",e),g(e.onError)}};var v=function(n,e){l.push({onSuccess:n,onError:e})};this.then=function(n,e){return"undefined"==typeof e&&(console.log("setting default onError"),e=o),"undefined"==typeof n&&(console.log("setting default onSuccess"),n=o),u.isPending()?(console.log("adding next",n,e),v(n,e),u):u.isFulfilled()?h(n,e):u.isRejected()?g(e):void 0},this.fail=function(n){return u.then(void 0,n)},this.force=function(n){return u.then(n,n)},"function"==typeof n&&n(u.resolve,u.reject)},f=function(n){return new i(n,void 0)};f.all=function(n){for(var e,r=new f,t=n.length,o=new Array(t),i=new Array(t),u=new Array(t),c=function(){var n=0;for(var e in u)if(n++,!u[e])return void r.reject(i);n==t&&r.resolve(o)},l=0;l<n.length;l++)e=n[l],function(n,e){e.then(function(e){u[n]=!0,o[n]=e,c()}).fail(function(e){u[n]=!1,i[n]=e,c()})}(l,e);return r},f.race=function(n){for(var e,r=new f,t=n.length,o=new Array(t),i=new Array(t),u=0;u<n.length;u++)e=n[u],function(n,e){e.then(function(e){o[n]=e,r.resolve(o)}).fail(function(e){i[n]=e,r.reject(i)})}(u,e);return r},f.any=function(n){for(var e,r=new f,t=n.length,o=new Array(t),i=new Array(t),u=new Array(t),c=function(){for(var n=0;t>n;n++)if(!o[n])return!1;return!0},l=0;l<n.length;l++)e=n[l],function(n,e){e.then(function(e){u[n]=e,r.resolve(u)}).fail(function(e){o[n]=!0,i[n]=e,c()&&r.reject(i)})}(l,e);return r},e.exports=f},{}]},{},[1])(1)});
